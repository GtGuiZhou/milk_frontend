(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e46e9a","chunk-2d0d02a2","chunk-2d209770"],{"678c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("el-form-item",{attrs:{label:"自动重置"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#eeeeee"},model:{value:e.autoReset,callback:function(t){e.autoReset=t},expression:"autoReset"}})],1),n("el-form-item",[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),n("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1)],1)},o=[],a=(n("63ff"),n("becb")),r="/admin/user/insert",s="user_insert_form",l={username:"",password:""},u={name:s,data:function(){return{form:this.$until.jsonClone(l),loading:!1,autoReset:!0}},methods:{onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.post(r,this.form);case 4:this.$notify.success("新增成功"),this.autoReset&&this.onReset(),this.$emit("insert-success");case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[1,,7,10]])})));function t(){return e.apply(this,arguments)}return t}(),onReset:function(){this.form=this.$until.jsonClone(l)}}},c=u,p=n("4e82"),m=Object(p["a"])(c,i,o,!1,null,"67ac7286",null);t["default"]=m.exports},a8be:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("el-form-item",[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即修改")])],1)],1)],1)},o=[],a=(n("63ff"),n("becb")),r="/admin/user/update",s="user_update_form",l={name:s,props:{form:{type:Object}},data:function(){return{loading:!1}},methods:{onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$http.post(r,this.form);case 4:this.$notify.success("修改成功"),this.$emit("update-success");case 6:return e.prev=6,this.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(){return e.apply(this,arguments)}return t}()}},u=l,c=n("4e82"),p=Object(c["a"])(u,i,o,!1,null,"5d5de7ea",null);t["default"]=p.exports},fa83:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("el-button",{attrs:{plain:"",icon:"el-icon-refresh"},on:{click:t.onRefresh}}),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.onInsertClick}},[t._v("新增")]),i("el-button",{attrs:{type:"danger",plain:"",disabled:t.selection.length<1},on:{click:t.onDeleteSelection}},[t._v("删除")]),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中...",data:t.tableData,stripe:"","el-table-column":""},on:{"selection-change":t.onSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"id",label:"id"}}),i("el-table-column",{attrs:{prop:"username",label:"用户名"}}),i("el-table-column",{attrs:{prop:"nickname",label:"昵称"}}),i("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),i("el-table-column",{attrs:{prop:"email",label:"电话"}}),i("el-table-column",{attrs:{prop:"login_fail_count",label:"登录失败次数"}}),i("el-table-column",{attrs:{prop:"login_ip",label:"登录ip"}}),i("el-table-column",{attrs:{width:"280",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",plain:""},on:{click:function(n){return t.lottery(e.row)}}},[t._v("中奖")]),i("el-button",{attrs:{type:"warning",plain:""},on:{click:function(n){return t.onUpdateRow(e.row)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger",plain:""},on:{click:function(n){return t.onDeleteRows([e.row])}}},[t._v("删除")])]}}])})],1),i("div",{staticStyle:{"text-align":"center",margin:"10px"}},[i("el-pagination",{attrs:{"current-page":this.page.index,"page-sizes":[10,20,50,100,"all"],"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:this.page.total},on:{"size-change":function(n){return t.loadData({size:n,index:e.page.index})},"current-change":function(n){return t.loadData({size:e.page.size,index:n})}}})],1),i("el-dialog",{attrs:{title:"添加",visible:t.visualInsertForm},on:{"update:visible":function(e){t.visualInsertForm=e}}},[i("crud_insert_form",{on:{close:function(e){t.visualInsertForm=!1},"insert-success":t.onRefresh}})],1),i("el-dialog",{attrs:{title:"更新",visible:t.visualUpdateForm},on:{"update:visible":function(e){t.visualUpdateForm=e}}},[i("crud_update_form",{attrs:{form:t.updateRow},on:{close:function(e){t.visualUpdateForm=!1},"update-success":t.onRefresh}})],1),i("el-dialog",{attrs:{title:"更新",visible:t.visualLotteryForm},on:{"update:visible":function(e){t.visualLotteryForm=e}}},[i("label",[t._v("中奖币种：")]),i("el-select",{attrs:{placeholder:"请选择赠送币种"},model:{value:t.lotteryCoin,callback:function(e){t.lotteryCoin=e},expression:"lotteryCoin"}},t._l(t.coinOptions,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t._v("\n         \n        "),i("label",[t._v("中奖币种数量：")]),i("el-input-number",{model:{value:t.lotteryCoinNumber,callback:function(e){t.lotteryCoinNumber=e},expression:"lotteryCoinNumber"}}),t._v("\n         \n        "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitLottery}},[t._v("提交中奖")])],1)],1)},o=[],a=(n("63ff"),n("becb")),r=n("678c"),s=n("a8be"),l="/admin/user/index",u="/admin/user/delete",c="id",p="user",m={name:p,components:{crud_insert_form:r["default"],crud_update_form:s["default"]},data:function(){return{coinOptions:[],tableLoading:!1,selection:[],tableData:[],updateRow:null,visualInsertForm:!1,visualUpdateForm:!1,visualLotteryForm:!1,lotteryCoinNumber:"",lotteryCoin:0,page:{size:10,index:1,total:0}}},created:function(){var e=this;this.$http.get("/admin/coin/index?size=all").then((function(t){return e.coinOptions=t.list})),this.loadData()},methods:{loadData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:this.page,i.length>1&&void 0!==i[1]?i[1]:{},this.tableLoading=!0,e.prev=3,t={index:this.page.index,size:this.page.size},e.next=7,this.$http.post(l,t);case 7:n=e.sent,this.tableData=n.list,this.page.total=n.total;case 10:return e.prev=10,this.tableLoading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[3,,10,13]])})));function t(){return e.apply(this,arguments)}return t}(),onRefresh:function(){this.loadData()},onSelectionChange:function(e){this.selection=e},onInsertClick:function(){this.visualInsertForm=!0},onUpdateRow:function(e){this.visualUpdateForm=!0,this.updateRow=e},onDeleteSelection:function(){this.onDeleteRows(this.selection)},onDeleteRows:function(e){var t=this,n=e.map((function(e){return e[c]})).join(",");this.$http.delete(u+"?ids="+n).then((function(){t.$message.success("删除成功"),t.loadData()}))},lottery:function(e){this.updateRow=e,this.visualLotteryForm=!0},submitLottery:function(){var e=this;this.$http.post("/admin/user/lottery",{user_id:this.updateRow.id,coin_id:this.lotteryCoin,number:this.lotteryCoinNumber}).then((function(){return e.$notify.success("中奖执行成功")}))}}},d=m,f=n("4e82"),h=Object(f["a"])(d,i,o,!1,null,"790c69cc",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-12e46e9a.d9276fa8.js.map