{"version":3,"sources":["webpack:///./src/pages/admin/banner.vue?2dbd","webpack:///src/pages/admin/banner.vue","webpack:///./src/pages/admin/banner.vue?ea66","webpack:///./src/pages/admin/banner.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onRefresh","$event","formVisible","isUpdateForm","_v","selection","length","onDeleteSelection","staticStyle","tableData","onSelectionChange","scopedSlots","_u","key","fn","scope","fileList","row","image","thumb","staticClass","slot","form","onDeleteRow","id","page","index","size","total","loadData","ref","successUploadBanner","beforeUploadBanner","$uploadImageUrl","model","value","callback","$$v","$set","expression","onFormUpdate","onFormSave","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0da709.f2ff0121.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.onRefresh}}),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.formVisible = true;_vm.isUpdateForm=false}}},[_vm._v(\"新增\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\",\"disabled\":_vm.selection.length < 1},on:{\"click\":_vm.onDeleteSelection}},[_vm._v(\"删除\")]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.onSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"image\",\"label\":\"图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"file-list\":_vm.fileList,\"src\":scope.row.image.thumb,\"fit\":\"fit\"}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_vm._v(\"\\n                        加载中\"),_c('span',{staticClass:\"dot\"},[_vm._v(\"...\")])])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"链接\"}}),_c('el-table-column',{attrs:{\"prop\":\"group\",\"label\":\"分组\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){_vm.isUpdateForm = true;_vm.form = scope.row;_vm.formVisible = true}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.onDeleteRow(scope.row.id)}}})]}}])})],1),_c('div',{staticStyle:{\"text-align\":\"center\",\"margin\":\"10px\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.page.index,\"page-sizes\":[10, 20, 50, 100, 'all'],\"page-size\":_vm.page.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page.total},on:{\"size-change\":function (size) { return _vm.loadData({size:size,index:_vm.page.index}); },\"current-change\":function (index) { return _vm.loadData({size:_vm.page.size,index:index}); }}})],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.formVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.formVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"60px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"图片\"}},[_c('el-upload',{attrs:{\"name\":\"image\",\"drag\":\"\",\"list-type\":\"picture\",\"on-success\":_vm.successUploadBanner,\"before-upload\":_vm.beforeUploadBanner,\"action\":_vm.$uploadImageUrl + '?thumb=200'}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过2m\")])])],1),_c('el-form-item',{attrs:{\"label\":\"分组\"}},[_c('el-input',{model:{value:(_vm.form.group),callback:function ($$v) {_vm.$set(_vm.form, \"group\", $$v)},expression:\"form.group\"}})],1),_c('el-form-item',{attrs:{\"label\":\"链接\"}},[_c('el-input',{model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}})],1),_c('el-form-item',[(!_vm.isUpdateForm)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onFormSave}},[_vm._v(\"保存\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onFormUpdate}},[_vm._v(\"更新\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-button plain icon=\"el-icon-refresh\" @click=\"onRefresh\"></el-button>\r\n        <el-button type=\"primary\" plain @click=\"formVisible = true;isUpdateForm=false\">新增</el-button>\r\n        <el-button type=\"danger\" plain @click=\"onDeleteSelection\" :disabled=\"selection.length < 1\">删除</el-button>\r\n        <el-table\r\n                :data=\"tableData\"\r\n                stripe\r\n                style=\"width: 100%\"\r\n                @selection-change=\"onSelectionChange\"\r\n        >\r\n            <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"55\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"image\"\r\n                    label=\"图片\"\r\n            >\r\n                <template slot-scope=\"scope\">\r\n                    <el-image\r\n                            :file-list=\"fileList\"\r\n                            style=\"width: 100px; height: 100px\"\r\n                            :src=\"scope.row.image.thumb \"\r\n                            fit=\"fit\">\r\n                        <div slot=\"placeholder\" class=\"image-slot\">\r\n                            加载中<span class=\"dot\">...</span>\r\n                        </div>\r\n                    </el-image>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                    prop=\"url\"\r\n                    label=\"链接\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                    prop=\"group\"\r\n                    label=\"分组\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                    label=\"操作\"\r\n            >\r\n                <template slot-scope=\"scope\">\r\n                    <el-button type=\"primary\" icon=\"el-icon-edit\"\r\n                               @click=\"isUpdateForm = true;form = scope.row;formVisible = true\"></el-button>\r\n                    <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"onDeleteRow(scope.row.id)\"></el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div style=\"text-align: center;margin: 10px\">\r\n            <el-pagination\r\n                    @size-change=\"size => loadData({size:size,index:page.index})\"\r\n                    @current-change=\"index => loadData({size:page.size,index:index})\"\r\n                    :current-page=\"page.index\"\r\n                    :page-sizes=\"[10, 20, 50, 100, 'all']\"\r\n                    :page-size=\"page.size\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\"\r\n                    :total=\"page.total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <el-dialog\r\n                title=\"提示\"\r\n                :visible.sync=\"formVisible\"\r\n                width=\"600px\"\r\n        >\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"60px\" label-position=\"left\">\r\n                <el-form-item label=\"图片\">\r\n                    <el-upload\r\n                            name=\"image\"\r\n                            drag\r\n                            list-type=\"picture\"\r\n                            :on-success=\"successUploadBanner\"\r\n                            :before-upload=\"beforeUploadBanner\"\r\n                            :action=\"$uploadImageUrl + '?thumb=200'\"\r\n                    >\r\n                        <i class=\"el-icon-upload\"></i>\r\n                        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过2m</div>\r\n                    </el-upload>\r\n                </el-form-item>\r\n                <el-form-item label=\"分组\">\r\n                    <el-input v-model=\"form.group\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"链接\">\r\n                    <el-input v-model=\"form.link\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" v-if=\"!isUpdateForm\" @click=\"onFormSave\">保存</el-button>\r\n                    <el-button type=\"primary\" v-else @click=\"onFormUpdate\">更新</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"banner\",\r\n        data() {\r\n            return {\r\n                tableFields: [\r\n                    {prop: 'image', label: \"图片\"},\r\n                    {prop: 'group', label: \"分组\"},\r\n                    {prop: 'link', label: \"链接\"},\r\n                ],\r\n                isUpdateForm: false,\r\n                formVisible: false,\r\n                formLoading: false,\r\n                selection: [],\r\n                tableData: [],\r\n                page: {\r\n                    size: 10,\r\n                    index: 1,\r\n                    total: 0,\r\n                },\r\n                form: {\r\n                    image: '',\r\n                    group: '',\r\n                    link: ''\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.loadData()\r\n        },\r\n        computed: {\r\n            fileList() {\r\n                return [this.form.image]\r\n            }\r\n        },\r\n        methods: {\r\n            loadData(page = this.page, where = {}) {\r\n                this.$request.post('/banner/index', {page, where}).then(\r\n                    res => {\r\n                        this.tableData = res.data.list\r\n                        this.page = res.data.page\r\n                    }\r\n                )\r\n            },\r\n            beforeUploadBanner(file) {\r\n                if (file.size > 2097152) {\r\n                    this.$message.warning('上传文件不能大于2m')\r\n                    return false\r\n                }\r\n            },\r\n            successUploadBanner(res) {\r\n                this.form.image = res.data\r\n            },\r\n\r\n            onRefresh() {\r\n                this.loadData()\r\n            },\r\n\r\n            onSelectionChange(selection){\r\n                this.selection = selection\r\n            },\r\n\r\n            onDeleteSelection(){\r\n                this.onDeleteRow(this.selection.map(item => {\r\n                    return item.id\r\n                }))\r\n            },\r\n\r\n            onDeleteRow(ids) {\r\n                if (ids instanceof Array) {\r\n                    ids = ids.join(',')\r\n                }\r\n                this.$request('/banner/delete?ids=' + ids).then(\r\n                    () => {\r\n                        this.$message.success('删除成功')\r\n                        this.loadData()\r\n                    }\r\n                )\r\n            },\r\n\r\n            onFormSave() {\r\n                this.formLoading = true\r\n                this.$request.post('/banner/save', this.form).then(\r\n                    () => {\r\n                        this.$message.success('保存成功')\r\n                        this.formVisible = false\r\n                        this.loadData()\r\n                        this.formLoading = false\r\n                    }\r\n                ).catch(\r\n                    () => {\r\n                        this.formLoading = false\r\n                    }\r\n                )\r\n            },\r\n            onFormUpdate() {\r\n                this.formLoading = true\r\n                this.$request.put('/banner/update', this.form).then(\r\n                    () => {\r\n                        this.$message.success('更新成功')\r\n                        this.formVisible = false\r\n                        this.loadData()\r\n                        this.formLoading = false\r\n                    }\r\n                ).catch(\r\n                    () => {\r\n                        this.formLoading = false\r\n                    }\r\n                )\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./banner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!./banner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./banner.vue?vue&type=template&id=3890b9f5&scoped=true&\"\nimport script from \"./banner.vue?vue&type=script&lang=js&\"\nexport * from \"./banner.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3890b9f5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}