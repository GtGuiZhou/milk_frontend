(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b93cc"],{"31a9":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.formVisible=!0,e.isUpdateForm=!1}}},[e._v("新增")]),o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,stripe:"","row-key":"id","default-expand-all":"","tree-props":{children:"sub_menu",hasChildren:"hasSubMenu"}}},[e._l(e.tableFields,(function(e,t){return o("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label}})})),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(o){e.isUpdateForm=!0,e.form=t.row,e.formVisible=!0}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.onDeleteRow(t.row.id)}}})]}}])})],2),o("el-dialog",{attrs:{title:1===e.formVisible?"新增":"编辑",visible:e.formVisible,width:"600px"},on:{"update:visible":function(t){e.formVisible=t}}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,"label-width":"60px","label-position":"left"}},[o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"图标"}},[o("el-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),o("el-form-item",{attrs:{label:"链接"}},[o("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),o("el-form-item",{attrs:{label:"父级"}},[o("el-cascader",{attrs:{options:[{name:"无",id:0}].concat(e.tableData),props:{expandTrigger:"hover",value:"id",label:"name",children:"sub_menu",checkStrictly:!0}},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1),o("el-form-item",[e.isUpdateForm?o("el-button",{attrs:{type:"primary"},on:{click:e.onFormUpdate}},[e._v("更新")]):o("el-button",{attrs:{type:"primary"},on:{click:e.onFormSave}},[e._v("保存")])],1)],1)],1)],1)},r=[];function a(e){if(Array.isArray(e))return e}function i(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var o=[],n=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)if(o.push(i.value),t&&o.length===t)break}catch(s){r=!0,a=s}finally{try{n||null==l["return"]||l["return"]()}finally{if(r)throw a}}return o}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){return a(e)||i(e,t)||l()}var c={name:"menu",data:function(){return{tableFields:[{prop:"name",label:"菜单名称"},{prop:"icon",label:"图标"},{prop:"url",label:"链接"}],tableData:[],isUpdateForm:!1,formVisible:!1,formLoading:!1,form:{id:"",name:"",url:"",pid:"0"}}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.$request.get("/menu/index").then((function(t){e.tableData=t.data})),this.$store.dispatch("getMenu")},onDeleteRow:function(e){var t=this;e instanceof Array&&(e=e.join(",")),this.$request("/menu/delete?ids="+e).then((function(){t.$message.success("删除成功"),t.loadData()}))},onFormSave:function(){var e=this;this.formLoading=!0,this.$request.post("/menu/save",this.form).then((function(){e.$message.success("保存成功"),e.formVisible=!1,e.loadData(),e.formLoading=!1})).catch((function(){e.formLoading=!1}))},onFormUpdate:function(){var e=this;this.formLoading=!0;var t=[this.form].concat([]),o=s(t,1),n=o[0];delete n.sub_menu,this.$request.put("/menu/update",n).then((function(){e.$message.success("更新成功"),e.formVisible=!1,e.loadData(),e.formLoading=!1})).catch((function(){e.formLoading=!1}))}}},u=c,m=o("4e82"),f=Object(m["a"])(u,n,r,!1,null,"2060df57",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0b93cc.2ad2afd7.js.map